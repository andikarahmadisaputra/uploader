<%- include('./partials/header', {title: "Share File"}) %> <%-
include('./partials/navbar') %>

<div class="container">
  <div class="row mt-4">
    <div class="col-md-12">
      <% if (error_msg) { %>
      <div class="alert alert-danger">
        <ul class="mb-0">
          <% error_msg.forEach(msg => { %>
          <li><%= msg %></li>
          <% }) %>
        </ul>
      </div>
      <% } %> <% if (success_msg) { %>
      <div class="alert alert-success"><%= success_msg %></div>
      <% } %>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-md-12">
      <h2>Share <%= file.name %> With</h2>
      <form action="/owned/<%= file.id %>/share" method="post">
        <% users.forEach(user => { %>
        <div class="form-check">
          <input type="checkbox" class="form-check-input" id="<%= user.id %>" name="user"
          value="<%= user.id %>" <%= file.SharedWith?.map(el => el.id).includes(user.id) ? "checked" : "" %> />
          <label class="form-check-label" for="<%= user.id %>"><%= user.name %></label>
        </div>
        <% }) %>
        <button class="btn btn-primary" type="submit"><i class="bi bi-save-fill"></i> Save</button>
      </form>
    </div>
  </div>
</div>

<%- include('./partials/footer') %>
